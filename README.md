# HomLux

## ç‰¹æ€§

é¡¹ç›®å·²ç»è‡ªå¸¦ä¸‹é¢çš„ä¾èµ–ï¼š

- [UnoCSS](https://github.com/MellowCo/unocss-preset-weapp) åŠŸèƒ½å¼ºå¤§ä¸”æ€§èƒ½æé«˜çš„ CSS å¼•æ“
- [MobX](https://github.com/wechat-miniprogram/mobx-miniprogram-bindings) å®˜æ–¹æ¨èçš„å…¨å±€çŠ¶æ€ç®¡ç†åº“
- [computed](https://github.com/wechat-miniprogram/computed) åƒå†™ Vue ä¸€æ ·å†™ computed å’Œ watch å§
- [Vant](https://vant-contrib.gitee.io/vant-weapp) è½»é‡ã€å¯é çš„å¾®ä¿¡å°ç¨‹åºç»„ä»¶åº“
- SvgIcon è‡ªå®ç° svg åŠ¨æ€åŠ è½½ç»„ä»¶ï¼Œä½¿ç”¨è„šæœ¬è‡ªåŠ¨ä» iconify æ‹‰å– svg æ ‡ç­¾

é¡¹ç›®é…ç½®äº†ä¸€ä¸ªåˆ†åŒ…ç¤ºä¾‹ï¼Œå¯ä»¥æŒ‰éœ€æ±‚è¿›è¡Œä¿®æ”¹ã€‚

## ğŸ“ ä»£ç ç»“æ„

```
HomLuxå°ç¨‹åº
â”œâ”€â”€ .husky // git hooks
â”œâ”€â”€ build // ä¸€äº›è‡ªåŠ¨åŒ–è„šæœ¬
â”œâ”€â”€ docs // é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ src // å°ç¨‹åºæºç 
    â”œâ”€â”€ apis // åç«¯æ¥å£å°è£…
    â”œâ”€â”€ assets // èµ„æºç›®å½•
          â”œâ”€â”€ svg // å­˜æ”¾svgæ–‡ä»¶
          â”œâ”€â”€ img // å­˜æ”¾å›¾ç‰‡æ–‡ä»¶
          â””â”€â”€ lottie // å­˜æ”¾åŠ¨ç”»èµ„æº
    â”œâ”€â”€ components // å…¬ç”¨ç»„ä»¶
    â”œâ”€â”€ behaviors // å…±äº«ä»£ç 
          â”œâ”€â”€ pageBehaviors // é¡µé¢å±‚çº§å…¬å…±ä»£ç 
          â””â”€â”€  // 
    â”œâ”€â”€ config // ä¸€äº›å…¨å±€å…¬ç”¨çš„é…ç½®ã€æ•°æ®
    â”œâ”€â”€ commons // å…¬å…±ä»£ç 
          â”œâ”€â”€ templates // å…¬å…±wxmlæ¨¡æ¿
          â””â”€â”€ wxs // å…¬å…±wxs module
    â”œâ”€â”€ custom-tab-bar // è‡ªå®šä¹‰tabbarï¼ˆå¿…é¡»åœ¨è¿™ä¸ªç›®å½•ï¼Œä¸èƒ½æ”¾åˆ«çš„ç›®å½•ï¼‰
    â”œâ”€â”€ store // å…¨å±€çŠ¶æ€
    â”œâ”€â”€ package-distribution // é…ç½‘ç›¸å…³é¡µé¢åˆ†åŒ…ï¼ˆæ·»åŠ è®¾å¤‡ã€é™„è¿‘è®¾å¤‡ã€è¿æ¥wifiç­‰ï¼‰
    â”œâ”€â”€ package-mine // æˆ‘çš„ç›¸å…³é¡µé¢åˆ†åŒ…ï¼ˆå®¶åº­ç®¡ç†ã€æˆ¿é—´ç®¡ç†ã€è®¾å¤‡ç®¡ç†ã€OTAã€è¯­éŸ³æ§åˆ¶ã€è®¾å¤‡æ›¿æ¢ï¼‰
    â”œâ”€â”€ package-room-protocol // ç”¨æˆ·åè®®åˆ—è¡¨å’Œåè®®å±•ç¤ºåˆ†åŒ…
    â”œâ”€â”€ package-room-control // æˆ¿é—´ç›¸å…³é¡µé¢åˆ†åŒ…ï¼ˆæˆ¿é—´é¡µé¢æ§åˆ¶è®¾å¤‡ã€åœºæ™¯åˆ—è¡¨ã€åœºæ™¯ç®¡ç†ï¼‰
    â”œâ”€â”€ pages // ä¸»åŒ…çš„é¡µé¢ï¼ˆå°ç¨‹åºä¸»é¡µã€ç™»å½•ï¼‰
    â””â”€â”€ utils // å…¬ç”¨æ–¹æ³•
â””â”€â”€ typings // ç±»å‹å£°æ˜æ–‡ä»¶
```

## ä½¿ç”¨æ–¹æ³•

1. ä½¿ç”¨`npm i`æˆ–è€…`pnpm i`å®‰è£…ä¾èµ–
2. è¿è¡Œ`npm run unocss`æˆ–è€…`pnpm unocss`ç›‘å¬ wxml æ–‡ä»¶å¹¶ç”Ÿæˆå¯¹åº” wxss
3. åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ï¼Œç‚¹å‡»ï¼šå·¥å…·-æ„å»º npm
4. å¼€å§‹ç¼–å†™ä»£ç 

## ç»„ä»¶æ–‡æ¡£

- [è‡ªå®šä¹‰å¯¼èˆªæ ](docs/components/custom-nav-bar.md)
- [å®¶åº­é€‰æ‹©ä¸‹æ‹‰èœå•](docs/components/home-select-menu.md)
- [SVGå›¾æ ‡æ¸²æŸ“](docs/components/svg-icon.md)
- [van-button](docs/components/van-button.md)

## é¡¹ç›®è§„èŒƒ

1. ä¸»åŒ…é¡µé¢å­˜æ”¾åœ¨ pages ç›®å½•ä¸‹ï¼Œåˆ†åŒ…é¡µé¢å­˜æ”¾åœ¨ packages ç›®å½•ä¸‹ï¼Œå¦‚æœåˆ†åŒ…å†…å®¹éå¸¸å¤šï¼Œå¯ä»¥æŒ‰ç…§ packageXXX å†è¿›è¡ŒåŒºåˆ†ã€‚
2. å…¨å±€çŠ¶æ€æ¨¡å‹å®šä¹‰å­˜æ”¾åœ¨ store ç›®å½•ä¸‹ï¼ŒæŒ‰ç…§ä¸šåŠ¡æ‹†åˆ†æ¨¡å—ã€‚
3. æ¥å£è°ƒç”¨æ–¹å¼å°è£…åœ¨ apis ç›®å½•ä¸‹ï¼Œå¯ä»¥æŒ‰ç…§ä¸šåŠ¡åŒºåˆ†æ¨¡å—ï¼Œå¦‚æœé¡¹ç›®æ¯”è¾ƒå¤§æœ‰å¤šä¸ªåç«¯æ¥å£åœ°å€ï¼Œå¯ä»¥å½’ç±»åˆ°ä¸åŒæ–‡ä»¶å¤¹è¿›è¡ŒåŒºåˆ†ã€‚
4. æ¥å£é€šç”¨çš„è¯·æ±‚å¤„ç†ã€å“åº”å¤„ç†ã€å¤±è´¥å¤„ç†éƒ½å°è£…åœ¨ utils/request ç›®å½•ä¸‹ï¼Œå‚è€ƒ`utils/request/defaultRequest.ts`
   ï¼Œä¸é€šç”¨çš„æ•°æ®å’Œé€»è¾‘æ“ä½œé€šè¿‡å‚æ•°ä¼ å…¥ã€‚[å‚è€ƒæ–‡æ¡£](docs/requestä½¿ç”¨è¯´æ˜.md)
5. æ— è®ºé¡µé¢å’Œç»„ä»¶éƒ½ç»Ÿä¸€ä½¿ç”¨Componentè¿›è¡Œæ„é€ ã€‚

### CSS æ ·å¼

1. è¯·å°½é‡é¿å…å°†é™æ€çš„æ ·å¼å†™è¿› `style` ä¸­ï¼Œä»¥å…å½±å“æ¸²æŸ“é€Ÿåº¦
2. å…¬å…±æ ·å¼

| æ ·å¼å              | æè¿°       |
|------------------|----------|
| `page-container` | ç”¨äºä¸€èˆ¬é¡µé¢å®¹å™¨ |

3. Unocss ç”¨æ³•å’Œ Tailwind åŸºæœ¬ä¸€è‡´ï¼Œå¯ä»¥æŸ¥çœ‹[Tailwind](https://tailwindcss.com/)å®˜æ–¹æ–‡æ¡£è¿›è¡Œä½¿ç”¨ï¼Œå¾®ä¿¡å°ç¨‹åºçš„ class
   ä¸æ”¯æŒå†™`%`ï¼Œæ‰€ä»¥è¦ç”¨`/`æ¥ä»£æ›¿ï¼Œæ¯”å¦‚ w-50%å¯ä»¥ç”¨ w-1/2 è¡¨ç¤ºï¼Œä¸æ”¯æŒ`!`ï¼Œè¦ç”¨`_el_`ä»£æ›¿ï¼Œæ¯”å¦‚ï¼š`w-50rpx!`å¯ä»¥ç”¨`w-50rpx_el_`
   è¡¨ç¤º
4. `Vant`çš„`Cell å•å…ƒæ ¼`æ ·å¼å·²æ ¹æ®UIç¨¿è°ƒæ•´ã€‚å¯ç›´æ¥ä½¿ç”¨

### svg å›¾æ ‡

> SvgIcon ç”¨æ³•ï¼šSvgIcon ç»„ä»¶ä¼šä» globalData è¯»å– svg æ ‡ç­¾ï¼Œç„¶ååŠ¨æ€ç”Ÿæˆ urlï¼Œå¹¶ä½¿ç”¨ css æ¸²æŸ“ã€‚é¡¹ç›®åœ¨ build/getIconify.js
> å®ç°äº†è¯»å–ä¸€ä¸ª `/iconify.json` æ–‡ä»¶é‡Œçš„`iconList`åˆ—è¡¨ï¼Œç„¶åç”Ÿæˆ js/ts æ–‡ä»¶ï¼Œç„¶åå¯¼å…¥åˆ° globalData å³å¯æ ¹æ® svg çš„åå­—åŠ è½½
> svgã€‚ä½¿ç”¨
> svg

è¯·ä¼˜å…ˆä½¿ç”¨å›¾æ ‡åº“ï¼šhttps://icon-sets.iconify.design/icon-park-outline/

### JS

1. æ¥å£å‘½åé¦–å­—æ¯å¤§å†™ï¼Œå»ºè®®æ¥å£å‰å¯ä»¥åŠ ä¸ŠI
2. TSç±»å‹è§„èŒƒï¼Œä¸šåŠ¡ç›¸å…³çš„ç±»å‹å®šä¹‰åœ¨typingsç›®å½•ä¸‹ï¼ŒæŒ‰éœ€ä½¿ç”¨namespaceå’Œä¸åŒçš„d.tsè¿›è¡Œæ‹†åˆ†ï¼Œå¦‚æœä¸šåŠ¡å¤æ‚ï¼Œè¿˜å¯ä»¥å½’ç±»åˆ°ä¸åŒæ–‡ä»¶å¤¹è¿›è¡ŒåŒºåˆ†ã€‚

### è·¨é¡µé¢é€šä¿¡

> ä½¿ç”¨mobx-miniprogramåŒ…ï¼Œä½¿ç”¨reactionç›‘å¬storeé‡Œçš„çŠ¶æ€å˜åŒ–å³å¯ï¼Œä½¿ç”¨ç¤ºä¾‹ï¼š

```
import { reaction } from 'mobx-miniprogram'
import { store } from './store/index'
component({
    data: {
        _clean: ()=>{}
    },
    methods: {
        onLoad() {
            this.data._clean = reaction(()=>store.xxx, (data, reaction)=>{...}) // ç›‘å¬storeé‡Œçš„xxx
        },
        onUnload() {
            // é¡µé¢ç¦»å¼€æ—¶éœ€è¦æ‰§è¡Œcleanæ¸…é™¤å‰¯ä½œç”¨ï¼Œé˜²æ­¢å†…å­˜æ³„æ¼
            this.data._clean()
        }
    }
)
```

## æ³¨æ„ç‚¹

1. [computed ä½¿ç”¨æ³¨æ„ç‚¹](./docs/computedä½¿ç”¨è¯´æ˜.md)
2. [lottie ä½¿ç”¨æ³¨æ„ç‚¹](./docs/lottieä½¿ç”¨è¯´æ˜.md)
3. [mobx ä½¿ç”¨æ³¨æ„ç‚¹](./docs/mobxä½¿ç”¨è¯´æ˜.md)
4. [request ä½¿ç”¨æ³¨æ„ç‚¹](./docs/requestä½¿ç”¨è¯´æ˜.md)
5. [storage ä½¿ç”¨æ³¨æ„ç‚¹](./docs/storageä½¿ç”¨è¯´æ˜.md)
