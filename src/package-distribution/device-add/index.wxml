<view class="page-container flex flex-col">
  <nav-bar background="transparent" leftArrow="{{true}}" bind:leftTap="goBack" title="添加设备"></nav-bar>

  <view class="grow flex flex-col pb-128rpx">
    <block wx:if="{{status === 'networking'}}">
      <loading class="mt-130rpx" text="请将设备尽量靠近路由器" show-progress="{{true}}" percentage="{{60}}"></loading>

      <view class="flex flex-col items-center pt-70rpx">
        <view wx:for="{{stepList}}" class="transition flex felx-row items-center text-28 text-black-tips leading-40rpx pb-40rpx">
          <text class="{{ item.isCheck && 'text-black-secondary'}}">{{item.text}}</text>
          <svg-icon class="ml-32rpx transition" name="icon-park-solid:check-one" color="{{item.isCheck ? '#488fff' : 'transparent'}}"></svg-icon>
        </view>
      </view>
    </block>

    <block wx:if="{{status === 'success'}}">
      <tips-box text="设备添加成功！" icon="/assets/img/search-subdevice/add-success.png"></tips-box>

      <view class="grow px-48rpx mt-96rpx">
        <edit-device-form></edit-device-form>
      </view>

      <view class="flex flex-col items-center pt-24rpx px-32rpx">
        <view class="flex flex-row items-center text-26 text-black-secondary leading-36rpx">
          <text>继续添加其他设备，</text>
          <text class="text-blue">扫码</text>
          <text class="px-12rpx">搜索</text>
          <text class="text-blue">附近设备 ></text>
        </view>

        <van-button class="w-full mt-32rpx" block type="primary" size="large">完成</van-button>
      </view>
    </block>

    <block wx:if="{{status === 'error'}}">
      <tips-box text="连接失败！" icon="/assets/img/device-add/error.png"></tips-box>

      <view class="grow pl-88rpx pr-50rpx pt-180rpx">
        <view class="text-28 text-black-primary">
          <text>请排查以下原因：</text>
        </view>

        <view class="flex flex-col py-24rpx text-26 text-hex-666 leading-46rpx">
          <text>1、确保路由器网络环境正常</text>
          <text>2、将网管尽可能靠近路由器</text>
          <text>3、合理摆放网关的位置，避免部分子设备距离过远</text>
        </view>
      </view>

      <van-button class="mt-32rpx mx-32rpx" block type="primary" size="large">完成</van-button>
    </block>
  </view>
</view>
