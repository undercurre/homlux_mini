<view class="page-container flex flex-col">
  <nav-bar background="transparent" leftArrow="{{true}}" bind:leftTap="goBack" bind:longpress="toggleDebug" title="{{pageTitle}}"></nav-bar>

  <view class="text-right py-32rpx pr-44rpx">
    <!-- 工厂产测模式 -->
    <image class="w-48 h-48 mr-48rpx" src="/assets/img/mine/gateway.png" bind:tap="toggleAddr" wx:if="{{isDebugMode}}"></image>
    <!-- 基于连接的指令调试 -->
    <!-- <image class="w-48 h-48 mr-48rpx" src="{{connectIcon}}" bind:tap="toggleBleMode" wx:if="{{isDebugMode}}"></image> -->
    <image class="w-48 h-48" src="/assets/img/home-manage/setting.png" bind:tap="toSetting"></image>
  </view>

  <view class="flex-col-center">
    <view class="joystick">
      <mz-button class="absolute up" img="/package-remoter/assets/up.png" imgActive="/package-remoter/assets/upActive.png" imgWidth="304rpx" imgHeight="142rpx" icon="{{device.joystick.up.icon}}" iconActive="{{device.joystick.up.iconActive}}" bind:tap="btnTap" data-key="{{device.joystick.up.key}}" data-lp-key="{{device.joystick.up.key}}" data-dir="U" bind:longpress="handleLongPress" bind:touchend="handleTouchEnd"></mz-button>

      <mz-button class="absolute right" img="/package-remoter/assets/right.png" imgActive="/package-remoter/assets/rightActive.png" imgWidth="142rpx" imgHeight="304rpx" icon="{{device.joystick.right.icon}}" iconActive="{{device.joystick.right.iconActive}}" text="{{device.joystick.right.name}}" dir="col" bind:tap="btnTap" data-key="{{device.joystick.right.key}}" data-dir="R" bind:longpress="handleLongPress" bind:touchend="handleTouchEnd"></mz-button>

      <mz-button class="absolute down" img="/package-remoter/assets/down.png" imgActive="/package-remoter/assets/downActive.png" imgWidth="304rpx" imgHeight="142rpx" icon="{{device.joystick.down.icon}}" iconActive="{{device.joystick.down.iconActive}}" bind:tap="btnTap" data-key="{{device.joystick.down.key}}" bind:longpress="handleLongPress" data-dir="D" bind:touchend="handleTouchEnd"></mz-button>

      <mz-button class="absolute left" img="/package-remoter/assets/left.png" imgActive="/package-remoter/assets/leftActive.png" imgWidth="142rpx" imgHeight="304rpx" icon="{{device.joystick.left.icon}}" iconActive="{{device.joystick.left.iconActive}}" text="{{device.joystick.left.name}}" dir="col" bind:tap="btnTap" data-key="{{device.joystick.left.key}}" bind:longpress="handleLongPress" data-dir="L" bind:touchend="handleTouchEnd"></mz-button>

      <mz-button class="absolute middle" type="round" imgWidth="154rpx" imgHeight="154rpx" hasFeedback="{{isFactoryMode}}" bind:tap="btnTap" data-key="{{device.joystick.middle.key}}"></mz-button>
    </view>

    <view class="flex flex-row justify-evenly flex-wrap mt-36rpx w-full">
      <mz-button wx:for="{{device.mList}}" wx:key="index" icon="{{item.icon}}" iconActive="{{item.iconActive}}" bind:tap="btnTap" class="mt-64rpx" type="square" text="{{item.name}}" data-key="{{item.key}}"></mz-button>
    </view>
  </view>

  <view class="main-control">
    <mz-button2 wx:for="{{device.bList}}" wx:key="index" icon="{{item.icon}}" iconActive="{{item.iconActive}}" bind:tap="btnTap" text="{{item.name}}" data-key="{{item.key}}"></mz-button2>
  </view>
</view>
