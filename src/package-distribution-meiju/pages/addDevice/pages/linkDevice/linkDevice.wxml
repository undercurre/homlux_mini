<!--addDevice//pages/linkDevice/linkDevice.wxml-->
<view id="{{brand}}">
  <view class="page container">
    <link-device-header bind:clickCancel="clickCancel" app-name="app-name" buttonColor="{{brandConfig.backButtonColor}}"></link-device-header>
    <view wx:if="{{mode == 0}}" class="notice-bar" style="margin-top:{{navTop}}px">
      <!-- <mx-noticebar type="warn" size="24" notice="若提示WLAN无网，请选择继续使用/连接"></mx-noticebar> -->
      <mx-notice-bar custom-class="mx-notice-link-device" class-prefix="mx-iconfont" color="#FFB857" background="rgba(255,184,87,0.10)" scrollable="{{ false }}" text="若提示WLAN无网，请选择继续使用/连接">
        <view slot="left-icon" class="tip-box">
          <image class="tip-icon" src="{{tipIcon}}" alt="" />
        </view>
      </mx-notice-bar>
    </view>
    <!-- mode == 0 ? 24 : navTop -->
    <view class="scan-desc" style="margin-top:{{brand !== 'colmo'?(mode == 0 ? 24 : navTop):(mode == 0 ? 0:navTop)}}px">
      <view wx:if="{{mode == 21}}" class="link-device-title thick">{{deviceName}}联网中</view>
      <view wx:else class="link-device-title thick">连接{{deviceName}}</view>
      <view class="link-device-flow">
        <!-- <image src="./assets/img/ic_meiphone@1x.png" class="phone-img" bindtap="paskIp"></image> -->
        <image src="{{meiPhone}}" class="phone-img" bindtap="paskIp"></image>
        <!-- <image src="./assets/img/loading_spot.png" class="blue-tooth-img"></image> -->
        <image src="{{loadingImg}}" class="blue-tooth-img"></image>
        <!-- <image hidden="{{deviceImgLoaded}}" src="../assets/img/dms_img_lack@3x.png" class="device-img"></image> -->
        <image wx:if="{{!deviceImgLoaded}}" src="{{dms_img_lack}}" class="link-device-img"></image>
        <image hidden="{{!deviceImgLoaded}}" src="{{deviceImg}}" class="device-img" bindload="devivceImgSuccess" binderror="deviceImgError"></image>
      </view>
      <text wx:if="{{mode==0 || mode==3 || mode== 8 || mode==31 || mode==100}}" class="block link-device-thick">请将家庭路由器尽量靠近设备</text>
      <text wx:else class="block link-device-thick">请将手机尽量靠近{{deviceName}}</text>
    </view>
    <view class="progressBar" wx:if="{{brand !== 'colmo'}}">
      <view class="finish" style="width:{{(curStep+1)*33.3}}%"></view>
    </view>
    <view class="link-device-progress-list" wx:if="{{mode != null && mode != 8  && mode != 20 && mode != 21 && mode != 30 && mode != 100 && brand =='colmo'}}">
      <view class="link-step" wx:for="{{progressList}}" wx:key="index" wx:for-index="index">
        <image wx:if="{{(item.isFinish||index<curStep)}}" style="opacity:{{index<=curStep?1:0}}" class="step-img" src="./assets/img/ic_success.png"> </image>
        <image wx:else style="opacity:{{index<=curStep?1:0}}" class="step-img-loading" src="./assets/img/link_ic_loading@3x.png"> </image>

        <text class="link-device-step-desc" style="color:{{index>curStep?'rgba(255,255,255,0.25)':'#fff'}}">{{item.name}}</text>
      </view>
    </view>
    <view class="progress-list" wx:if="{{mode != null && mode != 8  && mode != 20 && mode != 21 && mode != 30 && mode != 100 && brand!=='colmo'}}">
      <view class="step" wx:for="{{progressList}}" wx:key="index" wx:for-index="index">
        <text class="step-desc" style="color:{{index>curStep?'#C7C7CC':'#000000'}}">{{item.name}}</text>
        <image wx:if="{{(item.isFinish||index<curStep)}}" style="opacity:{{index<=curStep?1:0}}" class="step-img" src="./assets/img/link_ic_checked.png"> </image>
        <image wx:else style="opacity:{{index<=curStep?1:0}}" class="step-img" src="./assets/img/link_ic_loading.png"> </image>
      </view>
    </view>
    <view wx:if="{{time<=60 && mode != 8}}" class="timing-desc">最多还需要<text class="blue">{{time}}</text>秒，请耐心等待</view>

    <!-- 放弃添加弹窗 -->
    <!-- <custom-dialog bind:clickCancel="clickCancel" customDialog="{{customDialog}}"></custom-dialog> -->
    <mx-dialog id="mx-cancleLink" show="{{ishowDialog}}" showCancelButton="true" cancelButtonColor="{{dialogStyle.cancelButtonColor}}" confirmButtonColor="{{dialogStyle.confirmButtonColor}}" title="{{titleContent}}" message="{{messageContent}}" cancel-button-text="放弃添加" confirm-button-text="再等等" bind:confirm="clickWaitAminute" bind:cancel="discardAdd"> </mx-dialog>
    <mx-dialog id="mx-dialog"> </mx-dialog>
    <!-- 密码错误弹窗 -->
    <change-psw-dialog bind:clickCancel="clickCancel" customDialog="{{changePswDialog}}" closeImg="{{closeImg}}"></change-psw-dialog>
  </view>
  <mx-dialog id="mx-dialog" />
</view>
