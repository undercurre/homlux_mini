<van-popup
  show="{{ show }}"
  z-index="1002"
  round
  position="bottom"
  bind:close="handleClose"
  closeable
  lock-scroll="{{true}}"
>
  <view class="w-full bg-white flex-col flex items-center py-20rpx">
    <view class="flex justify-evenly w-686rpx mt-10rpx relative">
      <view class="flex-col-center">
        <text class="mx-24rpx mt-16rpx tab-title">{{title || deviceInfo.deviceName}}</text>
      </view>
      <!-- 设置、关闭按钮 -->
      <view
        wx:if="{{isShowSetting}}"
        class="absolute left-20rpx top-16rpx"
        bind:tap="toDetail"
      >
        <image
          class="w-48 h-48"
          src="/assets/img/home-manage/setting.png"
        ></image>
      </view>
    </view>

    <view class="w-686rpx">
      <view class="flex flex-row justify-between items-center px-32rpx">
        <!-- 温度减 -->
        <icon-button
          disabled="{{disabledMinus}}"
          isOn="{{false}}"
          size="{{74}}"
          round="{{37}}"
          bgColor="#f7f8f9"
          bgColorActive="#cccccc"
          icon="/package-room-control/assets/img/minus.png"
          iconActive="/package-room-control/assets/img/minusOn.png"
          textColor="#a2a2a2"
          data-rebound="{{true}}"
          bind:touchstart="handleBtnTap"
          data-key="minus"
        ></icon-button>

        <view>
          <view class="flex flex-row justify-center items-start mt-64rpx">
            <text class="text-28rpx text-hex-fff leading-none">℃</text>
            <text class="text-124rpx text-hex-495264 leading-none">{{temperature}}</text>
            <text class="text-28rpx text-hex-515d75">℃</text>
          </view>

          <view class="text-center mt-30rpx h-36">
            <text
              wx:if="{{showIndoorTemp}}"
              class="text-24 text-hex-a2a2a2"
              >室内温度：{{showIndoorTemp}}℃</text
            >
          </view>
        </view>

        <!-- 温度加 -->
        <icon-button
          disabled="{{disabledPlus}}"
          isOn="{{false}}"
          size="{{74}}"
          round="{{37}}"
          bgColor="#f7f8f9"
          bgColorActive="#cccccc"
          icon="/package-room-control/assets/img/plus.png"
          iconActive="/package-room-control/assets/img/plusOn.png"
          textColor="#a2a2a2"
          data-rebound="{{true}}"
          bind:touchstart="handleBtnTap"
          data-key="plus"
        ></icon-button>
      </view>

      <view class="py-64rpx">
        <mz-slider
          disabled="{{disabledSlider}}"
          bind:slideEnd="handleBtnTap"
          bind:slideChange="handleSlideChange"
          value="{{propView.temperature}}"
          barHeight="36"
          data-min="{{minTemp}}"
          data-max="{{30}}"
          active-color="#488FFF"
          data-key="temperature"
          use-button-slot
        >
          <view
            slot="button"
            class="slider-button"
          />
        </mz-slider>
      </view>

      <view class="flex flex-row justify-evenly rounded-24rpx bg-hex-f7f8f9 mt-30rpx">
        <drop-button
          disabled="{{disabledMode}}"
          icon="/package-room-control/assets/img/cold.png"
          size="{{80}}"
          round="{{20}}"
          text="{{currentMode}}"
          textColor="#a2a2a2"
          bind:touchstart="showPicker"
          data-key="mode"
        ></drop-button>

        <drop-button
          disabled="{{disabledWindSpeed}}"
          icon="/package-room-control/assets/img/wind.png"
          size="{{80}}"
          round="{{20}}"
          text="{{currentWindLevel || '风速'}}"
          textColor="#a2a2a2"
          bind:touchstart="showPicker"
          data-key="wind_speed"
        ></drop-button>
      </view>
    </view>
  </view>
</van-popup>

<van-popup
  show="{{ isShowPicker }}"
  round
  position="bottom"
  bind:close="handlePickerClose"
  closeable
  safe-area-inset-bottom="{{false}}"
  z-index="1002"
>
  <view class="w-750rpx flex flex-col items-center">
    <text class="h-50rpx text-36rpx text-black-2a mt-48rpx font-medium">{{pickerTitle}}</text>

    <view class="w-750rpx">
      <van-picker
        columns="{{ pickerColumns }}"
        default-index="{{pickerIndex}}"
        bind:change="onPickerChange"
      />
    </view>

    <view class="h-96rpx"></view>
    <view class="flex w-686rpx gap-x-46rpx">
      <van-button
        class="flex-1"
        size="large"
        bind:click="handlePickerClose"
        >取消</van-button
      >

      <van-button
        type="primary"
        class="flex-1"
        size="large"
        bind:click="handlePickerConfirm"
        >确认</van-button
      >
    </view>

    <view class="h-96rpx"></view>
  </view>
</van-popup>

<van-toast id="van-toast" />
