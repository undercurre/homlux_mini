<!-- 背景 -->
<view class="w-100vw h-100vh fixed left-0 top-0 bg-hex-f4f8ff bg-z-index-1"></view>
<view class="fixed left-0 top-0 w-100vw h-50vh bg-z-index" style="background: linear-gradient(180deg, rgba(87, 105, 255, 0.1) 0%, rgba(87, 105, 255, 0) 100%)"></view>

<view class="page-container flex flex-col">
  <!-- 标题 -->
  <nav-bar title="创建场景" left-arrow show-go-home bind:leftTap="goBack"></nav-bar>

  <text class="block leading-44rpx text-32 text-hex-353535 pt-32rpx px-40rpx">设备执行以下状态：</text>

  <!-- 设备卡片列表 -->
  <scroll-view scroll-y enhanced show-scrollbar="{{false}}" class="h-50vh grow px-24rpx py-32rpx">
    <view class="flex flex-row flex-wrap">
      <device-card wx:for="{{deviceList}}" class="w-180rpx pb-16rpx pt-16rpx flex justify-center" showControl showShadow showGradientBg device-info="{{item}}" data-item="{{item}}" select="{{item.select}}" bind:controlTap="handleControlTap" bind:cardTap="handleCardTap" bind:offlineTap="handleShowDeviceOffline" bind:longPress="handleLongpress" />

      <view class="btn-add flex flex-col items-center justify-center">
        <image class="w-48 h-48" src="/package-room-control/assets/scene-edit/add-icon.png" />

        <text class="leading-40rpx text-28 text-hex-979797 pt-24rpx">选择设备</text>
      </view>
    </view>
  </scroll-view>

  <view class="flex flex-row gap-x-46rpx px-32rpx">
    <van-button class="w-full" size="large" bind:click="handleReturn">取消</van-button>
    <van-button class="w-full" type="primary" size="large" bind:click="handleConfirm">下一步</van-button>
  </view>
</view>

  <!-- 设备列表弹窗 -->
  <select-card-popup title="选择设备" show="{{showDeviceListPopup}}" list="{{list}}" selectList="{{linkSelectList}}" cardType="{{selectLinkType}}" bind:close="handleLinkPopupClose" bind:select="handleLinkSelect" bind:confirm="handleLinkPopupConfirm" bind:cancel="handleLinkPopupReturn"></select-card-popup>